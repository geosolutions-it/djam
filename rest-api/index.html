
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Identity provider and Access manager for Django">
      
      
        <meta name="author" content="GeoSolutions">
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>REST API for API key management - DJAM</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="green" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rest-api-for-api-key-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DJAM" class="md-header__button md-logo" aria-label="DJAM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17a2 2 0 0 0 2-2 2 2 0 0 0-2-2 2 2 0 0 0-2 2 2 2 0 0 0 2 2m6-9a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5 5 5 0 0 1 5 5v2zm-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DJAM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              REST API for API key management
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/geosolutions-it/djam" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    djam
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DJAM" class="md-nav__button md-logo" aria-label="DJAM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17a2 2 0 0 0 2-2 2 2 0 0 0-2-2 2 2 0 0 0-2 2 2 2 0 0 0 2 2m6-9a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5 5 5 0 0 1 5 5v2zm-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3"/></svg>

    </a>
    DJAM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geosolutions-it/djam" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    djam
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Keys
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration-with-geoserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integration with GeoServer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#management-operations-of-the-api-key-management" class="md-nav__link">
    <span class="md-ellipsis">
      Management operations of the API key management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-use-of-the-rest-api" class="md-nav__link">
    <span class="md-ellipsis">
      How to use of the REST API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to use of the REST API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl-usage" class="md-nav__link">
    <span class="md-ellipsis">
      CURL usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swagger-front-end-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Swagger front-end usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-note-for-the-administrators-superusers" class="md-nav__link">
    <span class="md-ellipsis">
      A note for the administrators / superusers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rest-api-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      REST API endpoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST API endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list" class="md-nav__link">
    <span class="md-ellipsis">
      List
    </span>
  </a>
  
    <nav class="md-nav" aria-label="List">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      Create
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    <span class="md-ellipsis">
      Status
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renew" class="md-nav__link">
    <span class="md-ellipsis">
      Renew
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Renew">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#revoke" class="md-nav__link">
    <span class="md-ellipsis">
      Revoke
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Revoke">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_4" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rotate" class="md-nav__link">
    <span class="md-ellipsis">
      Rotate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rotate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_5" class="md-nav__link">
    <span class="md-ellipsis">
      Example:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication / Authorization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication / Authorization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Authorization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authorization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-key-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Resource key verification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datetime-verification" class="md-nav__link">
    <span class="md-ellipsis">
      Datetime verification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="rest-api-for-api-key-management">REST API for API key management</h1>
<p>As mentioned to the section <code>API keys</code>, DJAM allows to the users to have two types of API keys: </p>
<ul>
<li>API keys with scope: Management. These keys are used for the access to the REST API which is described in this section</li>
<li>API keys with scope: Resource. They are used for the access to the clients' resources (e.g GeoServer)</li>
</ul>
<p><strong>Note</strong>: For the sake of simplicity in this section the API keys with scope: Management will be called <code>management keys</code> and the API keys with scope: Resource will be called <code>resource keys</code>.</p>
<p>Each <code>resource key</code> includes two important parameters: (a) an expiration date (<code>expiry</code>) and (b) a <code>revoked</code> value which denotes if this resource key is active or not, while one user is able to have many resource keys. Thus, to facilitate the management of the resource keys, users are able to use a REST API in order to apply several operations in terms of API key management.</p>
<h2 id="management-operations-of-the-api-key-management">Management operations of the API key management</h2>
<p>The main operations for the API key management are described below:</p>
<ul>
<li>List: It outputs the list of a user's resource keys</li>
<li>Create: It creates a new Api Key with <code>resource</code> scope</li>
<li>Status: It returns the status of an Api Key, i.e. its revoked status and the expiration date</li>
<li>Revoke: It modifies the <code>revoked</code> value of a resource key. When the <code>revoked</code> is defined as <code>True</code>, the corresponding API key is deactivated.</li>
<li>Renew: The ApiKey expiration date is extended. The defined expiration date cannot exceed the max expiration period of six months. If the datetime is not defined, the ApiKey will be extended for 30 days.</li>
<li>Rotate: The old ApiKey is revoked while a new ApiKey is created and returned to the user. The old API Key expiration date can be extended for three days more as a rollout time window by defining the <code>short_expiry</code> parameter as True.</li>
</ul>
<p>It's worth noting that all the operations above can be applied as <code>POST</code> requests while they are developed in separated endpoints:</p>
<ul>
<li>List: Endpoint <code>/key_list</code></li>
<li>Create: Endpoint <code>/create_key</code></li>
<li>Status: Endpoint <code>/status</code></li>
<li>Revoke: Endpoint <code>/revoke</code></li>
<li>Renew: Endpoint <code>/renew</code></li>
<li>Rotate: Endpoint <code>/rotate</code></li>
</ul>
<h2 id="how-to-use-of-the-rest-api">How to use of the REST API</h2>
<p>The REST API can be used in two ways:</p>
<ul>
<li>By utilizing a tool for sending HTTP requests like cURL, PostMan, etc</li>
<li>By using the API documentation which is a Swagger frontend</li>
</ul>
<p>In both ways, a management key (a key with scope: <code>Management</code>) have to be defined in the <code>header</code>, in order to have access to the REST API with the following format: </p>
<p><code>Token &lt;management key&gt;</code> </p>
<p>It's worth noting that as the resource keys, management keys have to be valid in terms of <code>expiration date</code> and the <code>revoked</code> value. </p>
<p>Also, all the parameters which have to be defined are included inside the body of the request in a JSON format.</p>
<h3 id="curl-usage">CURL usage</h3>
<p>If we want to use cURL in order to use the REST API, the following format should be followed:</p>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;param1&quot;:&quot;value1&quot;, &quot;param2&quot;:&quot;value2&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/&lt;API endpoint&gt;/
</code></pre>
<h3 id="swagger-front-end-usage">Swagger front-end usage</h3>
<p>Another way to use the REST API is to use the Swagger front-end, in which each endpoint is included in a dropdown menu, where the user is able to define the parameters in a JSON format. It's worh noting that for a successful use of the API, users have to insert their <code>management key</code> (with the same format as above) by selecting the <code>padlock</code> icon on the right of each dropdown menu.</p>
<p><img alt="swagger front-end" src="../images/swagger_frontend.png" />
<img alt="swagger token key" src="../images/swagger_token_key.png" /></p>
<p>Each endpoint (in a dropdown menu) includes a short description while users are able to define the endpoint's parameters in a JSON format. By selecting the <code>Execute</code> button, the request will be performed.</p>
<p><img alt="swagger renew" src="../images/swagger_renew.png" /></p>
<p>The swagger front-end is available to the following URL: <code>http://&lt;DJAM_domain&gt;/openid/api/schema/swagger-ui/</code></p>
<h3 id="a-note-for-the-administrators-superusers">A note for the administrators / superusers</h3>
<p>Although users are able to manage only their own resource keys, administrators / superusers are able to manage all the resource keys through this REST API. Thus, superusers are able to define the user / account for a specific operation that they have to perform by using a parameter called <code>account_id</code>. For instance, if a superuser wants to output the status of a resource key which is owned by a user with <code>ID=4</code>, superuser can run:</p>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management_key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;account_id&quot;:4, &quot;resource_key&quot;:&quot;&lt;resource key&gt;&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/status/
</code></pre>
<p>It's worth noting that if the specified resource key is not owned by the user with the specified account, DJAM will not allowed the operation to be perfomed successfully.</p>
<h2 id="rest-api-endpoints">REST API endpoints</h2>
<p>In this section, each API endpoint is described in detail with examples and expected results.</p>
<h4 id="list">List</h4>
<p>The user is able to export her/his keys with resource scope.</p>
<h5 id="parameters">Parameters</h5>
<p>For the simple users, there are no parameters in this endpoint except the parameter: <code>account_id</code> which can be used only by the superusers.</p>
<h5 id="example">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; http://&lt;DJAM_domain&gt;/openid/api/token/key_list/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;tokens of george@gmail.com&quot;: [&lt;key1&gt;, &lt;key2&gt;, &lt;key3&gt;, ...]}
</code></pre>
<h4 id="create">Create</h4>
<p>The user is able to create a key with resource scope.</p>
<h5 id="parameters_1">Parameters</h5>
<ul>
<li>"revoked": "True or False"</li>
<li>"expiry": "2024-10-25T07:14:38.520290Z",</li>
<li>"account_id": null (for superusers)</li>
</ul>
<p>None of the parameters are required. If the parameters are not defined in the request, DJAM will use their default values.</p>
<h5 id="example_1">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;revoked&quot;: &quot;False&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/create_key/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;username&quot;: &quot;george@gmail.com&quot;, &quot;token&quot;: &quot;&lt;new resource key&gt;&quot;, &quot;id&quot;: 131, &quot;created&quot;: &quot;success&quot;}
</code></pre>
<h4 id="status">Status</h4>
<p>The user is able to export the status of a resource key.</p>
<h5 id="parameters_2">Parameters</h5>
<ul>
<li>"resource_key": "string"</li>
<li>"account_id": null (for superusers)</li>
</ul>
<p>The parameter <code>resource_key</code> is required since a valid resource key has to be defined.</p>
<h5 id="example_2">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;resource_key&quot;:&quot;&lt;resource key&gt;&quot;}' http://DJAM_domain/openid/api/token/status/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;username&quot;: &quot;george@gmail.com&quot;, &quot;key&quot;: &quot;&lt;resource key&gt;&quot;, &quot;id&quot;: 30, &quot;revoked&quot;: true, &quot;expiration date&quot;: &quot;2024-10-14T09:36:00Z&quot;}
</code></pre>
<h4 id="renew">Renew</h4>
<p>The user is able to renew the expiration date of a resource key.</p>
<h5 id="parameters_3">Parameters</h5>
<ul>
<li>"resource_key": "string"</li>
<li>"expiry": "2024-10-25T07:14:38.520725Z",</li>
<li>"account_id": null (for superusers)</li>
</ul>
<p>The parameter <code>resource_key</code> is required since a valid resource key has to be defined. If the expirition date is not defined a default expiration date of 30 days will be defined.</p>
<h5 id="example_3">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;resource_key&quot;:&quot;&lt;resource key&gt;&quot;, &quot;expiry&quot;: &quot;2024-12-13T09:37:00.000Z&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/renew/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;username&quot;: &quot;george@gmail.com&quot;, &quot;key&quot;: &quot;&lt;resource key&gt;&quot;, &quot;id&quot;: 48, &quot;New expiration date&quot;: &quot;2024-12-13T09:37:00Z&quot;}
</code></pre>
<h4 id="revoke">Revoke</h4>
<p>The user is able to revoke her/his resource key</p>
<h5 id="parameters_4">Parameters</h5>
<ul>
<li>"resource_key": "string"</li>
<li>"revoked": "True or False",</li>
<li>"account_id": null (for superusers)</li>
</ul>
<p>The parameters <code>resource_key</code> and <code>revoked</code> are required. If the <code>revoked</code> value is not defined a message: <code>Please set a revoked value</code> will be returned.</p>
<h5 id="example_4">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;resource_key&quot;:&quot;&lt;resource key&gt;&quot;, &quot;revoked&quot;: &quot;True&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/revoke/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;username&quot;: &quot;george@gmail.com&quot;, &quot;key&quot;: &quot;&lt;resource key&gt;&quot;, &quot;id&quot;: 48, &quot;new revoked value&quot;: &quot;True&quot;}
</code></pre>
<h4 id="rotate">Rotate</h4>
<p>The user is able to revoke an old resource key and create a new one. Optionaly she/he can extend the expiration date of her/his old resource key for three days by setting the "short_expiry" to True.</p>
<h5 id="parameters_5">Parameters</h5>
<ul>
<li>"resource_key": "string"</li>
<li>"short_expiry": "True or False",</li>
<li>"account_id": null (for superusers)</li>
</ul>
<p>The parameter <code>resource_key</code> is required since a valid resource key has to be defined. If the <code>short_expiry</code> value is not defined, the False value will be defined by default.</p>
<h5 id="example_5">Example:</h5>
<pre><code class="language-bash">curl -X POST -H &quot;Authorization: Token &lt;management key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;resource_key&quot;:&quot;&lt;resource key&gt;&quot;, &quot;short_expiry&quot;: &quot;True&quot;}' http://&lt;DJAM_domain&gt;/openid/api/token/rotate/
</code></pre>
<p>Expected results:</p>
<pre><code class="language-json">{&quot;message&quot;: &quot;The old key: &lt;resource key&gt; with id: 48 is revoked and extended for 3 days&quot;, &quot;username&quot;: &quot;george@gmail.com&quot;, &quot;new_key&quot;: &quot;&lt;new resource key&gt;&quot;, &quot;id&quot;: 132}
</code></pre>
<h2 id="authentication-authorization">Authentication / Authorization</h2>
<p>DJAM includes authentication and authorization functionality in order to manage and control the access to the REST API and as a consequence, to the clients' resources.</p>
<p>In this section, the main authentication and authorization constraints are presented including the expected results.</p>
<h3 id="authentication">Authentication</h3>
<p>As mentioned above, the users are able to access the REST API by using a valid management key which is included in the header of the request.</p>
<p>When a request is performed DJAM performs the following checks in terms of management key's validity:</p>
<ul>
<li>Check if the management key exists in the header of the request. If it doesn't exist the following response will be returned:</li>
</ul>
<pre><code class="language-json">status code: 401 (Unauthorized)

{
  &quot;detail&quot;: &quot;Invalid token header. No credentials provided.&quot;
}
</code></pre>
<ul>
<li>If the key exists in the header, it checks if it is owned by a specific user. If no, the following response will be returned:</li>
</ul>
<pre><code class="language-json">status code: 401 (Unauthorized)

{
  &quot;detail&quot;: &quot;Invalid token.&quot;
}
</code></pre>
<ul>
<li>Check if the defined key is a key with scope: Resource.
If the key is not a management key but a resource key, the following response will be returned:</li>
</ul>
<pre><code class="language-json">status code: 401 (Unauthorized)

{
  &quot;detail&quot;: &quot;Invalid token.&quot;
}
</code></pre>
<ul>
<li>Check if the key is expired. If yes, the following response will be returned:</li>
</ul>
<pre><code class="language-json">status code: 401 (Unauthorized)

{
  &quot;detail&quot;: &quot;Permissions error: Your token as been expired. Please renew it !&quot;
}
</code></pre>
<h3 id="authorization">Authorization</h3>
<p>After the authentication of the user, DJAM has to test the user permissions, the validity of the resource key and the expiration date when the corresponding parameters are required.</p>
<h4 id="resource-key-verification">Resource key verification</h4>
<p>During a request which requres a resource key, DJAM peforms the following checks:</p>
<p><strong>Note</strong> The resource key verification is not applied to the endpoints: /create_key and /key_list because these actions don’t require a resource key.</p>
<ul>
<li>If the user is superuser, DJAM checks if the specified user (by defining the <code>account_id</code>) owns the specified resource_key. If not, the following response will be returned:</li>
</ul>
<pre><code class="language-json">{&quot;detail&quot;:&quot;No access permissions or invalid resource key&quot;}
</code></pre>
<ul>
<li>Check if the user which sends the request (the user is retrieved by the management key during authentication), owns the specified resource key. If not, or if the field is empty or incorrect, the following response will be returned:</li>
</ul>
<pre><code class="language-json">{&quot;detail&quot;:&quot;No access permissions or invalid resource key&quot;}
</code></pre>
<ul>
<li>Check if the specified resource key is defined with the scope: <code>Resource</code>. If it is a management key, the following response will be returned:</li>
</ul>
<pre><code class="language-json">Status code: 403
{
  &quot;detail&quot;: &quot;No access permissions or invalid resource key&quot;
}
</code></pre>
<h4 id="datetime-verification">Datetime verification</h4>
<p>In the endpoints <code>/create_key</code> and <code>/renew</code>, the user is able to set an expiration datetime. Thus, DJAM performs a datetime verification which includes the following checks:</p>
<ul>
<li>Check, if a defined datetime is in the past. If yes, the following reponse will be returned:</li>
</ul>
<pre><code class="language-json">Status code: 403
{
  &quot;detail&quot;: &quot;Invalid format or expiration date.&quot;
}
</code></pre>
<ul>
<li>Check if the format of the datetime is incorrect. If yes, the following response will be returned:</li>
</ul>
<pre><code class="language-json">Status code: 403

{
  &quot;detail&quot;: &quot;Invalid format or expiration date.&quot;
}
</code></pre>
<ul>
<li>Check if the expiration datetime exceeds the 180 days. If yes, the following reponse will be returned:</li>
</ul>
<pre><code class="language-json">Status code: 403
{
  &quot;detail&quot;: &quot;Invalid format or expiration date.&quot;
}
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>